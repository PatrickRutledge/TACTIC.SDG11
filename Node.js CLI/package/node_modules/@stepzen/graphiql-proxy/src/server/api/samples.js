// Copyright IBM Corp. 2020, 2025

import fs from 'node:fs'
import prettier from 'prettier'

const samples = async (req, res) => {
  const {workspace} = req.stepzen

  const folder = workspace.schema
  const file = `${workspace.schema}/sample-queries.graphql`

  if (!fs.existsSync(folder) || !fs.existsSync(file)) {
    return res.json({
      samples: false,
    })
  }

  const samples = fs.readFileSync(file, 'utf8')
  const formatted = prettier.format(samples, {parser: 'graphql'})

  return res.json({
    samples: formatted,
  })
}

export default samples
